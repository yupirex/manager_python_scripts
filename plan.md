# Описание

- В папку telethon_cli будут поступать архивы с юзерботами для Telegram, юзер боты будут настроены на чтение разных чатов и нажатие кнопок от других ботов.
- Все архивы должны быть распакованы и удалены - автоматически выполняется при запуске main.py, это механизм добавления нового юзер бота.

## Принциа работы скрипта

1) Необходимо искать архивы, имена совпадают с маской "_*", распаковывать и удалять.
  
2) Выполнять поиск специальных файлов по маске и запускать их как отдельные фоновые процессы.
  Необходимо искать папку с по маске "_*". В найденой папке искать файл по маске "*engine.py"

3) т.к. для авторизации необходим интерактивный запуск, реализовано поочередный запуск для авторизации. После авторизации необходимо нажать ctrl + C, что бы остановить выполнение и перейти к следующему модулю для авторизации.

4) Папка commons содержит файл common.py, в котором базовые функции которые могут использовать юзерботы "_*\*engine.py". Папку копировать в директоию проекта и от туда использовать.

    Функция ***debug***:
    - получает сообщение, тип сообщения (новое, отредактированое и т.д.), настройки для дебага debug_set=[], нижние кнопки которые
    переносятся для следующих сообщений.

    Функция ***use_config***:
    - для импорта конфига   : получает имя файла, имя секции, возвращает словарь или False
    - для экспорта конфига  : получает имя файла, имя секции, словарь параметров и сохраняет в нужную секцию, возвращает True/False

    Функция ***main_auth***
    - выполняет авторизацию и запуск.

## Файлы конфигов

### Файл debug.ini будет содержать секции для каждого проэкта, имена секций определяют сами проэкты, при вызове функции ***use_config***

- пример конфига:
    [l2_debug]
    debug = ['sender', 'id', 'date', 'text', 'buttons' 'buttons_raw', 'raw']
    l2_reply_markup = None
    l2_chats = [93372553]

### Файл creds.ini хранит настройки для подключения к telegram

- Все настройки для всех одинаковые, функция будет вызываться и обязателными параметрами:
    file='creds.ini'
    section='TELETHON'
    обязательные параметры в словаре api_id, api_hash

## Проекты

- _autonomous - юзер бот для чата с @BotFather, для проверки/тестов.
  - работает при отдельном запуске
  - работает при запуске из менеджера

- _default - юзер бот для чата с @BotFather, для проверки/тестов. Пример как использовать конфиги и прочее.
  - Скопировать папку commons в директорию проекта, что бы было удобнее подключать и при использовании #mixer оно также все находилось в одной папке
  - подключает from commons.common import debug, для логирования чата и проверки работоспособности.
  - подключает from commons.common import use_config, для получения настроек из файлов "*.ini".
  - подключает from commons.common import main_auth, для авторизации и запуска клиента.
  - работает при отдельном запуске
  - работает при запуске из менеджера

- _default_copy - юзер бот для чата с @BotFather, для проверки/тестов. Копия _default, для того что бы повесить другой номер телефона.

## Папка #mixer

- mixer.bash: для Windows, Конвертирует проект с python скриптами в бинарный файл для Linux.
- mixer.cmd: для Windows, Конвертирует проект с python скриптами в бинарный файл для Windows.
- В папку source скопировать скрипт со всеми необходимыми файликами и requirements.txt, запустить "mixer".

pyinstaller при запуске определяет в какой системе запущен и конвертирует для нее бинарник, если нужно конвертировать для termux, то запуск нужно делать в термуксе, docker не сработает. В окружении Windiws используем Batch, в окружении Linux используем Bash.
После окончания всех действий получаем папку dist в которой находится нужный бинарный файл.

## Task

- Проверить кнопки.
  Опять при запуске пытается прочитать кнопки которых не должно быть.
  Проблема с конфигом
  Воспроизвелось после миксера.

- Написать bash скрипт для термукса - быстрой установки.
